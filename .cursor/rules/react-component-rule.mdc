---
alwaysApply: true
---

# 리액트 컴포넌트 규칙

1. **CRITICAL** 모든 page.tsx 파일에는 별도의 컴포넌트를 만들어 사용합니다. 이를 렌더링 컴포넌트라고 명명합니다. page.tsx 에 직접 페이지의 내용을 작성하지 않도록 합니다. 렌더링 컴포넌트를 작성할 때 렌더링되는 최상위 컴포넌트는 `Box.Panel` 이며, `panel` 프롭은 `false` 로 설정합니다.
2. **CRITICAL** 컴포넌트는 화살표 함수가 아닌, 함수 선언식 으로 작성합니다. 파일 이름과 컴포넌트의 이름은 같아야 합니다.
3. **CRITICAL** 모든 사용자 정의 컴포넌트는 참고 1의 **cva** 구조를 가져야 합니다.
4. **CRITICAL** 컴포넌트의 이름은 `PascalCase` 로 작성합니다.
5. 컴포넌트는 tailwindcss 를 사용하며, `apps/ui/_styles/tailwind.css` 를 참고해서 스타일을 작성합니다. 커스텀이 되어있기 때문에 공식 클래스를 사용할 수 없는 케이스도 존재합니다.
6. **CRITICAL** 상호작용 함수의 이름은 무조건 `on<Event><Target>` 형식으로 작성합니다.
7. **CRITICAL** 함수나 변수에 **handle** 이라는 단어를 사용하지 않습니다.
8. **CRITICAL** 모든 컴포넌트는 참고 2와 같이 프롭 타이핑을 해야 합니다. `Omit<React....>` 가 아니라 `ReactElementProps<ElementType, 'ExcludedKeys'>` 형식으로 작성합니다. 또한 인터페이스의 기본 프롭은 className, custom 입니다.
9. **CRITICAL** JSX 내부에 인라인 함수를 작성하지 않습니다. 모든 이벤트 핸들러와 콜백 함수는 컴포넌트 내부에서 별도 함수로 분리합니다. `useCallback`과 `useMemo`는 필수가 아니며, 리액트 컴파일러를 사용하기 때문에 필요에 따라 사용합니다. 함수 이름은 규칙 6에 따라 `on<Event><Target>` 형식을 따릅니다. 단, 트리거 함수(`triggerInfo`, `triggerError`, `triggerWarn`, `triggerConfirm`) 내부의 콜백 함수는 예외입니다.
10. **CRITICAL** 알림 모달이나 확인 모달을 표시해야 할 때는 직접 모달 컴포넌트를 렌더링하지 않고 `use-alert` 훅을 사용해야 합니다. 알림을 표시하려면 `triggerInfo`, `triggerError`, `triggerWarn`을 사용하고, 확인 모달을 표시하려면 `triggerConfirm`을 사용합니다. `AlertModal`과 `ConfirmModal`은 이미 `GlobalModals`를 통해 전역적으로 렌더링되므로 별도로 추가할 필요가 없습니다.
11. **CRITICAL** `cn` 함수를 사용하여 className을 적용할 때는 반드시 배열을 전달합니다. 예: `cn([cssVariants({}), className])` 또는 `cn([cssVariants({}), custom?.nav])`. 단일 문자열을 전달하는 경우에도 배열로 감싸서 전달합니다.

# 참고 1

cva 구조 예시

```typescript
const cssVariants = cva(["flex flex-col gap-2"], {
  variants: {},
  defaultVariants: {},
  compoundVariants: [],
});
```

# 참고 2

```typescript
interface Props
  extends ReactElementProps<HTMLElement>,
    VariantProps<typeof cssVariants> {
  className?: string | string[];
  custom?: {
    nav?: string | string[];
    ul?: string | string[];
    li?: string | string[];
    button?: string | string[];
  };
}
```

# 참고 3

cn 함수 사용 예시

```typescript
// 올바른 사용법 (배열 전달)
<div className={cn([cssVariants({}), className])} />
<div className={cn([cssVariants({}), custom?.nav])} />
<div className={cn([cssVariants({}), className, custom?.div])} />

// 잘못된 사용법 (배열 없이 전달)
<div className={cn(cssVariants({}), className)} />
<div className={cn(cssVariants({}), custom?.nav)} />
```
